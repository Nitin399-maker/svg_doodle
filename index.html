<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI SVG Hand-drawn Animation</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTUiIGZpbGw9IiMyNTYzZWIiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJtMTYgNyAyIDcgNyAyLTcgMi0yIDctMi03LTctMiA3LTJaIi8+PC9zdmc+" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        body { margin-bottom: 50vh; }
        .narrative { max-inline-size: 40rem; }
        .demo-card { transition: all 0.2s ease; border: 1px solid var(--bs-border-color); }
        .demo-card:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); border-color: var(--bs-primary); }
        .demo-card.border-primary { border-color: var(--bs-primary) !important; box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25); }
        #animation-output { min-height: 400px; border: 2px dashed var(--bs-border-color); border-radius: 8px; background: var(--bs-light); }
        .control-group { background: var(#ADB5BD); border-radius: 8px; padding: 1rem; margin-bottom: 1rem; }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary" data-bs-theme="dark">
        <div class="container-fluid">
            <a class="navbar-brand" href=".">SVG Animator</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <div class="nav-item dropdown ms-auto" role="group" aria-label="Toggle dark mode" title="Toggle Dark Mode">
                    <button class="dark-theme-toggle btn btn-outline-light dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Toggle theme (auto)">
                        <i class="bi bi-circle-half"></i> <span class="d-lg-none ms-2">Toggle theme</span>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><button class="dropdown-item" data-bs-theme-value="light"><i class="me-2 bi bi-sun-fill"></i> Light</button></li>
                        <li><button class="dropdown-item" data-bs-theme-value="dark"><i class="me-2 bi bi-moon-stars-fill"></i> Dark</button></li>
                        <li><button class="dropdown-item" data-bs-theme-value="auto"><i class="me-2 bi bi-circle-half"></i> Auto</button></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <h1 class="display-1 my-4 text-center">SVG Animator</h1>
        <h2 class="display-6 text-center">Generate <em>hand-drawn</em> SVG animations using AI</h2>
        <div class="mx-auto my-3 narrative">
            <p class="mb-2">Create beautiful hand-drawn style SVG animations with realistic drawing effects.</p>
            <ul class="mb-0">
                <li>Generate SVG from natural language prompts using AI</li>
                <li>Transform clean SVG paths into hand-drawn style animations</li>
                <li>Customize roughness, stroke width, timing, and colors</li>
                <li>Watch your drawings come to life with smooth animations</li>
            </ul>
        </div>

        <div class="my-4">
            <h3 class="h5 mb-3 text-center">Quick Start Examples</h3>
            <div id="demo-cards" class="row g-3">
                <!-- Demo cards will be rendered here from config.json -->
            </div>
        </div>

        <div class="accordion my-4" id="advanced-accordion">
            <div class="accordion-item">
                <h2 class="accordion-header" id="advanced-heading">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#advanced-settings" aria-expanded="false" aria-controls="advanced-settings">
                        <i class="bi bi-sliders2 me-2"></i> Advanced Settings
                    </button>
                </h2>
                <div id="advanced-settings" class="accordion-collapse collapse" aria-labelledby="advanced-heading" data-bs-parent="#advanced-accordion">
                    <div class="accordion-body">
                        <div class="row mb-3">
                            <div class="col">
                                <button id="config-btn" class="btn btn-outline-primary">
                                    <i class="bi bi-gear me-1"></i> Config LLM
                                </button>
                                <input id="model-select" class="form-control d-inline-block ms-2" style="width: 220px;" list="model-list" placeholder="Select or type model" value="gpt-5">
                                <datalist id="model-list">
                                    <option value="gpt-5-mini">
                                    <option value="gpt-5-nano">
                                    <option value="google/gemini-3-pro-preview">
                                    <option value="anthropic/claude-sonnet-4.5">
                                    <option value="google/gemini-2.5-pro">
                                </datalist>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="system-prompt" class="form-label">System Prompt</label>
                            <textarea id="system-prompt" class="form-control font-monospace" rows="12">You are an SVG generator. Create clean, simple SVG code based on user prompts.
REQUIREMENTS:
- return the svg code which can have high level of shapes, which looks realistic 
- Set fill="none" and stroke="black" for all paths
- Use stroke-width="2"
- Include proper viewBox (e.g., viewBox="0 0 200 200")
- Keep designs simple and clean
- Return only the SVG code, no explanations
Example output:
<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
  <path d="M50,50 L150,50 L150,150 L50,150 Z" fill="none" stroke="black" stroke-width="2"/>
</svg></textarea>
                            <div class="form-text">Used as the LLM system message. You can customize it.</div>
                        </div>

                        <div class="control-group">
                            <h6 class="mb-3">Animation Controls</h6>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label">Roughness</label>
                                    <div class="d-flex gap-2 align-items-center">
                                        <input type="range" class="form-range" id="r" min="0.1" max="3" step="0.1" value="0.3">
                                        <input type="number" class="form-control" id="rv" min="0.1" max="3" step="0.1" value="0.3" style="width:80px">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Stroke Width</label>
                                    <div class="d-flex gap-2 align-items-center">
                                        <input type="range" class="form-range" id="w" min="1" max="10" step="0.5" value="2.5">
                                        <input type="number" class="form-control" id="wv" min="1" max="10" step="0.5" value="2.5" style="width:80px">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Duration (ms)</label>
                                    <div class="d-flex gap-2 align-items-center">
                                        <input type="range" class="form-range" id="d" min="1000" max="8000" step="100" value="3000">
                                        <input type="number" class="form-control" id="dv" min="1000" max="8000" step="100" value="3000" style="width:80px">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Animation Type</label>
                                    <select class="form-select" id="t">
                                        <option value="2">One by One</option>
                                        <option value="0">Delayed</option>
                                        <option value="1">Sync</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Stroke Color</label>
                                    <input type="color" class="form-control form-control-color" id="c" value="#333333">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="mb-3">
            <label for="prompt" class="form-label">SVG Drawing Prompt:</label>
            <textarea id="prompt" class="form-control" rows="3" placeholder="Example: 'Draw a simple house with windows and door'">Draw a simple house with windows and door</textarea>
            <div class="mt-2">
                <button id="generate-svg" class="btn btn-primary me-2">
                    <i class="bi bi-magic"></i> Generate SVG
                </button>
            </div>
        </div>

        <div class="mb-3">
            <label for="svgInput" class="form-label">Generated SVG (editable)</label>
            <textarea id="svgInput" class="form-control font-monospace" rows="8" placeholder="Generated SVG will appear here..."></textarea>
            <div class="form-text">You can edit the SVG directly here after generation.</div>
            <div class="mt-2">
                <button id="a" class="btn btn-success me-2" disabled>
                    <i class="bi bi-play-fill"></i> Animate
                </button>
                <button id="reset" class="btn btn-warning" disabled>
                    <i class="bi bi-arrow-clockwise"></i> Reset
                </button>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="bi bi-brush"></i> Animation Output
                </h5>
            </div>
            <div class="card-body">
                <div id="o" class="d-flex align-items-center justify-content-center bg-white rounded" style="min-height:400px;">
                    <div class="text-center text-muted">
                        <i class="bi bi-lightbulb display-4 d-block mb-3"></i>
                        <h6>Ready to Create</h6>
                        <p class="mb-0">Generate SVG from your prompt, then watch it animate with hand-drawn style</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast container for alerts -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3" id="toast-container"></div>
    
    <script src="https://cdn.jsdelivr.net/npm/@gramex/ui@0.3.1/dist/dark-theme.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script type="module" src="script.js"></script>
</body>
</html>